<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Society</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <style>
        /* --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† --- */
        :root {
            --primary-color: #0f172a;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --text-main: #f8fafc;
            --text-muted: #cbd5e1;
            --bg-color: #020617;
            --section-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }

        body {
            font-family: 'Poppins', 'Cairo', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.7;
            overflow-x: hidden;
            transition: opacity 0.3s ease;
        }

        .hidden { display: none !important; }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ --- */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 8%; background: rgba(15, 23, 42, 0.75);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            position: fixed; width: 100%; top: 0; z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05); transition: all 0.3s ease;
        }

        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-main); text-decoration: none; display: flex; align-items: center; gap: 10px; direction: ltr; }
        .logo span { color: var(--accent-color); }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-links a { color: var(--text-muted); text-decoration: none; font-weight: 500; font-size: 0.95rem; transition: color 0.3s, transform 0.3s; position: relative; }
        .nav-links a:hover { color: var(--text-main); transform: translateY(-2px); }
        .nav-links a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0; background-color: var(--accent-color); transition: width 0.3s; }
        .nav-links a:hover::after { width: 100%; }
        
        .lang-btn { background-color: transparent; color: var(--text-main); border: 1px solid rgba(255, 255, 255, 0.2); padding: 6px 14px; border-radius: 20px; cursor: pointer; font-weight: 600; font-family: inherit; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; }
        .lang-btn:hover { background-color: rgba(255, 255, 255, 0.1); border-color: var(--text-main); }

        /* --- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… --- */
        section { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 100px 8% 50px; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        #home { background: linear-gradient(to bottom, rgba(2, 6, 23, 0.8), rgba(2, 6, 23, 1)), url('https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80') center/cover no-repeat; position: relative; }
        #home > * { animation: fadeInUp 1s ease-out forwards; opacity: 0; }
        h1 { font-size: 4rem; font-weight: 700; margin-bottom: 20px; line-height: 1.2; animation-delay: 0.2s; }
        h1 span { background: linear-gradient(45deg, var(--accent-color), #60a5fa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        p { font-size: 1.2rem; color: var(--text-muted); max-width: 700px; margin-bottom: 40px; animation-delay: 0.4s; }

        .join-btn { display: inline-flex; align-items: center; gap: 12px; background-color: #5865F2; color: white; padding: 16px 36px; text-decoration: none; border-radius: 12px; font-size: 1.1rem; font-weight: 600; box-shadow: 0 10px 25px -5px rgba(88, 101, 242, 0.5); transition: all 0.3s ease; animation-delay: 0.6s; }
        .join-btn:hover { background-color: #4752C4; transform: translateY(-5px) scale(1.02); box-shadow: 0 15px 35px -5px rgba(88, 101, 242, 0.6); }

        .server-stats-widget { display: flex; justify-content: center; gap: 30px; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 20px 35px; border-radius: 20px; margin-top: 60px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4); animation-delay: 0.8s; flex-wrap: wrap; }
        .stat-item { display: flex; align-items: center; gap: 15px; padding: 10px 15px; border-radius: 12px; transition: all 0.3s ease; }
        .stat-item:hover { background: rgba(255, 255, 255, 0.05); transform: translateY(-3px); }
        .stat-item i { font-size: 2.2rem; }
        .stat-info { text-align: left; display: flex; flex-direction: column; justify-content: center; }
        html[dir="rtl"] .stat-info { text-align: right; }
        .stat-info h4 { font-size: 1.6rem; color: var(--text-main); margin-bottom: 0; line-height: 1.2; font-weight: 700; direction: ltr; display: inline-block; }
        .stat-info span { font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 500; }

        .card-container { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); padding: 50px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); max-width: 800px; width: 100%; backdrop-filter: blur(10px); transition: background 0.5s ease; }
        h2 { font-size: 2.5rem; margin-bottom: 25px; color: var(--text-main); position: relative; display: inline-block; }
        h2::after { content: ''; position: absolute; width: 50%; height: 3px; bottom: -10px; left: 50%; transform: translateX(-50%); background-color: var(--accent-color); border-radius: 5px; }

        /* --- Pomodoro --- */
        #pomodoro { background-color: var(--bg-color); }
        .timer-display { font-size: 6rem; font-weight: 700; font-family: 'Poppins', sans-serif; margin: 20px 0; letter-spacing: 5px; text-shadow: 0 0 20px rgba(59, 130, 246, 0.5); direction: ltr; }
        .pomo-modes { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .mode-btn { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: var(--text-muted); padding: 10px 20px; border-radius: 30px; cursor: pointer; font-weight: 600; font-family: inherit; transition: all 0.3s ease; }
        .mode-btn.active, .mode-btn:hover { background: var(--accent-color); color: white; border-color: var(--accent-color); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4); }
        .custom-time-container { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 20px; }
        .custom-time-input { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); color: white; padding: 10px 15px; border-radius: 20px; font-family: inherit; font-weight: 600; width: 100px; text-align: center; outline: none; transition: all 0.3s ease; }
        .custom-time-input:focus { border-color: var(--accent-color); box-shadow: 0 0 10px rgba(59, 130, 246, 0.3); }
        .pomo-controls { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .control-btn { background: white; color: var(--primary-color); border: none; padding: 15px 30px; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; }
        .control-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2); }
        .control-btn.outline { background: transparent; color: white; border: 2px solid rgba(255, 255, 255, 0.2); }
        .control-btn.outline:hover { border-color: white; background: rgba(255, 255, 255, 0.1); }
        .pomo-settings { margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .bg-options { display: flex; justify-content: center; gap: 12px; margin-top: 15px; flex-wrap: wrap; }
        .bg-btn { width: 35px; height: 35px; border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.2); cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .bg-btn:hover { transform: scale(1.2); border-color: white; box-shadow: 0 0 10px rgba(255,255,255,0.3); }

        /* --- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ --- */
        #rules { background-color: var(--section-bg); }
        .rules-wrapper { max-width: 1000px !important; }
        .rules-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 40px; text-align: left; }
        html[dir="rtl"] .rules-grid { text-align: right; }
        .rule-card { background: rgba(2, 6, 23, 0.6); border: 1px solid rgba(255, 255, 255, 0.05); padding: 25px; border-radius: 15px; transition: all 0.3s ease; position: relative; }
        .rule-card:hover { transform: translateY(-5px); border-color: var(--accent-color); box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15); background: rgba(15, 23, 42, 0.9); }
        .rule-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: var(--accent-color); font-weight: 700; font-size: 1.15rem; }
        
        #downloads { background-color: var(--bg-color); }
        .downloads-wrapper { max-width: 1100px !important; }
        .downloads-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-top: 40px; width: 100%; }
        .download-card { background: rgba(2, 6, 23, 0.6); border: 1px solid rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 20px; transition: all 0.3s ease; text-align: left; display: flex; flex-direction: column; height: 100%; }
        html[dir="rtl"] .download-card { text-align: right; }
        .download-card:hover { transform: translateY(-10px); border-color: var(--accent-color); box-shadow: 0 15px 30px rgba(59, 130, 246, 0.15); background: rgba(15, 23, 42, 0.9); }
        .card-icon { font-size: 2.5rem; color: var(--accent-color); margin-bottom: 20px; }
        .card-title { font-size: 1.5rem; margin-bottom: 10px; color: var(--text-main); }
        .download-btn { display: inline-flex; justify-content: center; align-items: center; gap: 10px; background-color: var(--accent-color); color: white; padding: 12px 24px; text-decoration: none; border-radius: 10px; font-weight: 600; transition: all 0.3s ease; width: 100%; margin-top: auto;}
        .download-btn:hover { background-color: var(--accent-hover); }

        /* =========================================
           --- Ù‚Ø³Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… (QURAN SECTION) ---
           ========================================= */
        #quran { background-color: var(--section-bg); padding-bottom: 150px;}
        .quran-wrapper { max-width: 1200px !important; padding: 40px !important;}
        
        .quran-tabs { display: flex; gap: 10px; justify-content: center; background-color: rgba(0,0,0,0.3); padding: 8px; border-radius: 50px; margin: 20px auto 30px; max-width: fit-content;}
        .q-tab-btn { background: transparent; border: none; color: var(--text-muted); padding: 10px 30px; border-radius: 50px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-family: inherit;}
        .q-tab-btn.active { background-color: #10b981; color: white; }
        
        .q-search-box { position: relative; max-width: 600px; margin: 0 auto 30px; }
        .q-search-box i { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-muted); }
        html[dir="ltr"] .q-search-box i { right: auto; left: 20px; }
        .q-search-box input { width: 100%; padding: 15px 45px 15px 20px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); background-color: rgba(0,0,0,0.3); color: white; font-size: 1rem; outline: none; font-family: inherit;}
        html[dir="ltr"] .q-search-box input { padding: 15px 20px 15px 45px; }
        .q-search-box input:focus { border-color: #10b981; }

        .q-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; direction: rtl; /* Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ Ø§Ù„Ù€ json Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¯Ø§ÙŠÙ…Ø§ */ }
        
        .q-card { background-color: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .q-card:hover { transform: translateY(-5px); border-color: #10b981; background-color: rgba(16, 185, 129, 0.05); }
        .q-card .icon-wrapper { width: 60px; height: 60px; background-color: rgba(16, 185, 129, 0.1); color: #10b981; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; }
        .q-card h3 { font-size: 1.1rem; font-weight: 700; color: white; margin: 0; }
        .q-card p { font-size: 0.85rem; color: var(--text-muted); margin: 0; }

        .q-surah-card { flex-direction: row; text-align: right; padding: 15px 20px; justify-content: space-between; }
        .q-surah-info { display: flex; align-items: center; gap: 15px; }
        .q-surah-num { background-color: rgba(0,0,0,0.5); color: #10b981; width: 35px; height: 35px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 0.9rem; }
        .q-action-icon { color: var(--text-muted); transition: all 0.3s ease; font-size: 1.2rem; }
        .q-surah-card:hover .q-action-icon { color: #10b981; }
        .q-surah-card.playing { border-color: #10b981; background-color: rgba(16, 185, 129, 0.1); }
        .q-surah-card.playing .q-action-icon { color: #10b981; }

        .q-header-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; direction: rtl;}
        .q-back-btn { background: rgba(255,255,255,0.1); border: none; color: white; padding: 8px 20px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-family: inherit; font-weight: 600; transition: 0.3s;}
        .q-back-btn:hover { background: #10b981; }

        .btn-dl-all { background-color: rgba(16, 185, 129, 0.1); color: #10b981; border: 2px dashed #10b981; width: 100%; padding: 15px; border-radius: 15px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; font-family: inherit;}
        .btn-dl-all:hover { background-color: #10b981; color: white; }

        .q-loader { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #10b981; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 50px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù† (ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„) */
        .quran-player-bar { position: fixed; bottom: -100px; left: 0; width: 100%; background-color: #0b1120; border-top: 1px solid rgba(255,255,255,0.1); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; z-index: 2000; box-shadow: 0 -10px 30px rgba(0,0,0,0.6); transition: bottom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); direction: rtl; }
        .quran-player-bar.active { bottom: 0; }
        .qp-info { width: 25%; text-align: right; }
        .qp-info h4 { color: #10b981; font-size: 1rem; margin-bottom: 2px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
        .qp-info p { color: var(--text-muted); font-size: 0.85rem; margin:0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
        .qp-controls { width: 50%; display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .qp-btns { display: flex; align-items: center; gap: 20px; direction: ltr;}
        .qp-btn { background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; transition: 0.3s; }
        .qp-btn:hover { color: #10b981; }
        .qp-play-btn { width: 45px; height: 45px; background: #10b981; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; color: #0b1120; }
        .qp-play-btn:hover { transform: scale(1.05); background: #059669; }
        .qp-progress { display: flex; align-items: center; gap: 10px; width: 100%; font-size: 0.8rem; color: var(--text-muted); direction: ltr;}
        .qp-progress input { flex-grow: 1; accent-color: #10b981; cursor: pointer; height: 4px;}
        .qp-volume { width: 25%; display: flex; justify-content: flex-end; align-items: center; gap: 10px; color: var(--text-muted); direction: ltr;}
        .qp-volume input { width: 80px; accent-color: #10b981; cursor: pointer; height: 4px;}
        .qp-close { position: absolute; top: -15px; right: 20px; background: #ef4444; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; border: none; font-size: 0.9rem; box-shadow: 0 4px 10px rgba(0,0,0,0.3);}

        footer { text-align: center; padding: 30px; background-color: var(--section-bg); color: var(--text-muted); border-top: 1px solid rgba(255, 255, 255, 0.05); font-size: 0.95rem; margin-bottom: 0; transition: margin-bottom 0.4s;}

        @media (max-width: 768px) {
            nav { padding: 15px 5%; flex-direction: column; gap: 15px; }
            .nav-links { flex-wrap: wrap; justify-content: center; gap: 10px;}
            .q-tabs { flex-direction: column; border-radius: 15px; }
            .q-tab-btn { justify-content: center; border-radius: 10px;}
            .quran-player-bar { flex-direction: column; gap: 15px; padding: 15px; }
            .qp-info, .qp-controls { width: 100%; text-align: center; }
            .qp-volume { display: none; }
        }
    </style>
</head>
<body>

    <nav>
        <a href="#home" class="logo" style="direction: ltr;"><i class="fa-solid fa-graduation-cap"></i> Academic <span>Society</span></a>
        <div class="nav-links">
            <a href="#home" data-i18n="nav_home">Home</a>
            <a href="#about" data-i18n="nav_about">Who We Are</a>
            <a href="#pomodoro" data-i18n="nav_pomodoro">Pomodoro</a>
            <a href="#quran" data-i18n="nav_quran">Quran</a>
            <a href="#rules" data-i18n="nav_rules">Rules</a>
            <a href="#games" data-i18n="nav_games">Games</a>
            <a href="#downloads" data-i18n="nav_downloads">Apps</a>
            <button class="lang-btn" id="langToggle" onclick="toggleLanguage()">
                <i class="fa-solid fa-globe"></i> <span id="langText">Ø¹Ø±Ø¨ÙŠ</span>
            </button>
        </div>
    </nav>

    <section id="home">
        <h1 data-i18n="hero_title">What's up! Welcome to <span>Academic Society</span></h1>
        <p data-i18n="hero_desc">Your chill spot to learn, share cool ideas, and level up together. Hop in and let's build the future, bro.</p>
        <a href="https://discord.gg/7eYzD5evsE" target="_blank" class="join-btn">
            <i class="fa-brands fa-discord fa-lg"></i> <span data-i18n="hero_btn">Jump into Discord</span>
        </a>

        <div class="server-stats-widget">
            <div class="stat-item"><i class="fa-solid fa-users" style="color: #3b82f6;"></i><div class="stat-info"><h4 id="discord-members">--</h4><span data-i18n="stat_members">Members</span></div></div>
            <div class="stat-item"><i class="fa-solid fa-circle-dot" style="color: #22c55e;"></i><div class="stat-info"><h4 id="discord-online">--</h4><span data-i18n="stat_online">Online</span></div></div>
            <div class="stat-item"><i class="fa-solid fa-headset" style="color: #a855f7;"></i><div class="stat-info"><h4 id="discord-voice">--</h4> <span data-i18n="stat_voice">In Voice</span></div></div>
            <div class="stat-item"><i class="fa-solid fa-hashtag" style="color: #f59e0b;"></i><div class="stat-info"><h4 id="discord-channels">--</h4> <span data-i18n="stat_channels">Channels</span></div></div>
        </div>
    </section>

    <section id="about">
        <div class="card-container">
            <h2 data-i18n="about_title">Who Are We?</h2>
            <p data-i18n="about_desc" style="margin-top: 20px;">This server is just a chill place to hang out, play games, talk, laugh, and meet cool people. No heavy rules, no boring vibes â€” just a friendly space where you can be yourself.<br><br>Weâ€™ve got organized channels, fun bots, events, games, and a community that actually feels like friends, not strangers.<br><br>Whether youâ€™re here to game, chat, join voice, share memes, or just relax after a long day â€” youâ€™re welcome.<br><br>Simple as that:<br>Join, vibe, and enjoy</p>
        </div>
    </section>

    <section id="pomodoro">
        <div class="card-container" id="pomoCard">
            <h2 data-i18n="pomo_title">Pomodoro Timer</h2>
            <p data-i18n="pomo_desc">Level up your focus. Pick a mode, hit start, and crush your goals.</p>
            <div class="pomo-modes">
                <button class="mode-btn active" id="mode-work" onclick="setMode('work')" data-i18n="pomo_work">Deep Work</button>
                <button class="mode-btn" id="mode-short" onclick="setMode('shortBreak')" data-i18n="pomo_short">Short Break</button>
                <button class="mode-btn" id="mode-long" onclick="setMode('longBreak')" data-i18n="pomo_long">Long Break</button>
            </div>
            <div class="custom-time-container">
                <input type="number" id="customMinutes" min="1" max="180" placeholder="25" class="custom-time-input">
                <button class="mode-btn" onclick="setCustomMode()" data-i18n="pomo_apply">Apply</button>
            </div>
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="pomo-controls">
                <button class="control-btn" id="startBtn" onclick="toggleTimer()"><i class="fa-solid fa-play" id="startIcon"></i> <span id="startText" data-i18n="pomo_start">Start</span></button>
                <button class="control-btn outline" onclick="resetTimer()"><i class="fa-solid fa-rotate-right"></i> <span data-i18n="pomo_reset">Reset</span></button>
            </div>
            <div class="pomo-settings">
                <p data-i18n="pomo_bg_title" style="font-weight: 600; margin-bottom: 10px;">Change The Vibe</p>
                <div class="bg-options">
                    <button class="bg-btn" style="background: rgba(30, 41, 59, 0.7);" onclick="changeBg('rgba(30, 41, 59, 0.7)')"></button>
                    <button class="bg-btn" style="background: rgba(15, 118, 110, 0.8);" onclick="changeBg('rgba(15, 118, 110, 0.8)')"></button>
                    <button class="bg-btn" style="background: rgba(159, 18, 57, 0.8);" onclick="changeBg('rgba(159, 18, 57, 0.8)')"></button>
                    <button class="bg-btn" style="background: rgba(67, 56, 202, 0.8);" onclick="changeBg('rgba(67, 56, 202, 0.8)')"></button>
                    <button class="bg-btn" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.8), rgba(225, 29, 72, 0.8));" onclick="changeBg('linear-gradient(135deg, rgba(236, 72, 153, 0.8), rgba(225, 29, 72, 0.8))')"></button>
                    <button class="bg-btn" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.8), rgba(5, 150, 105, 0.8));" onclick="changeBg('linear-gradient(135deg, rgba(16, 185, 129, 0.8), rgba(5, 150, 105, 0.8))')"></button>
                    <button class="bg-btn" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.8), rgba(217, 119, 6, 0.8));" onclick="changeBg('linear-gradient(135deg, rgba(245, 158, 11, 0.8), rgba(217, 119, 6, 0.8))')"></button>
                    <button class="bg-btn" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(109, 40, 217, 0.8));" onclick="changeBg('linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(109, 40, 217, 0.8))')"></button>
                </div>
            </div>
        </div>
    </section>

    <section id="quran">
        <div class="card-container quran-wrapper">
            <h2 data-i18n="quran_title" style="color: #10b981;">The Quran</h2>
            <p data-i18n="quran_desc" style="margin-bottom: 10px;">Listen or download the Quran in high quality.</p>
            
            <div class="quran-tabs">
                <button class="q-tab-btn active" id="tab-listen" onclick="switchQTab('listen')"><i class="fas fa-headphones"></i> <span data-i18n="q_tab_listen">Listen</span></button>
                <button class="q-tab-btn" id="tab-download" onclick="switchQTab('download')"><i class="fas fa-cloud-download-alt"></i> <span data-i18n="q_tab_dl">Download</span></button>
            </div>

            <div class="q-search-box" id="qReciterSearchBox">
                <i class="fas fa-search"></i>
                <input type="text" id="qReciterSearch" placeholder="Search for a reciter..." data-i18n-placeholder="q_search_reciter">
            </div>
            <div class="q-search-box hidden" id="qSurahSearchBox">
                <i class="fas fa-search"></i>
                <input type="text" id="qSurahSearch" placeholder="Search for a surah..." data-i18n-placeholder="q_search_surah">
            </div>

            <div id="q-listen-container">
                <div id="q-reciters-view">
                    <div id="q-loading" class="q-loader"></div>
                    <div id="q-reciters-grid" class="q-grid"></div>
                </div>

                <div id="q-surahs-view" class="hidden">
                    <div class="q-header-flex">
                        <button class="q-back-btn" onclick="goBack('listen')">
                            <i class="fas fa-arrow-right"></i> <span data-i18n="q_back">Back</span>
                        </button>
                        <h3 id="q-current-reciter" style="color: white; margin: 0;"></h3>
                    </div>
                    <div id="q-surahs-grid" class="q-grid" style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));"></div>
                </div>
            </div>

            <div id="q-download-container" class="hidden">
                <div id="q-dl-reciters-view">
                    <div id="q-dl-reciters-grid" class="q-grid"></div>
                </div>

                <div id="q-dl-surahs-view" class="hidden">
                    <div class="q-header-flex">
                        <button class="q-back-btn" onclick="goBack('download')">
                            <i class="fas fa-arrow-right"></i> <span data-i18n="q_back">Back</span>
                        </button>
                        <h3 id="q-dl-current-reciter" style="color: white; margin: 0;"></h3>
                    </div>
                    
                    <button class="btn-dl-all" onclick="downloadFullQuran()">
                        <i class="fas fa-file-archive"></i> <span id="dl-btn-text" data-i18n="q_dl_all">Download Full Quran</span>
                    </button>

                    <div id="q-dl-surahs-grid" class="q-grid" style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));"></div>
                </div>
            </div>
        </div>
    </section>

    <div class="quran-player-bar" id="qPlayerBar">
        <button class="qp-close" onclick="closeQuranPlayer()"><i class="fas fa-times"></i></button>
        <div class="qp-info">
            <h4 id="qp-surah">Surah Name</h4>
            <p id="qp-reciter">Reciter Name</p>
        </div>
        <div class="qp-controls">
            <div class="qp-btns">
                <button class="qp-btn" onclick="qPlayNext()"><i class="fas fa-step-forward"></i></button>
                <button class="qp-btn qp-play-btn" id="qp-playBtn" onclick="qTogglePlay()"><i class="fas fa-play"></i></button>
                <button class="qp-btn" onclick="qPlayPrev()"><i class="fas fa-step-backward"></i></button>
            </div>
            <div class="qp-progress">
                <span id="qp-current-time">0:00</span>
                <input type="range" id="qp-progress-bar" value="0" min="0" step="1">
                <span id="qp-duration">0:00</span>
            </div>
        </div>
        <div class="qp-volume">
            <i class="fas fa-volume-up"></i>
            <input type="range" id="qp-volume-slider" min="0" max="1" step="0.01" value="1">
        </div>
        <audio id="qAudio"></audio>
    </div>
    <section id="rules">
        <div class="card-container rules-wrapper">
            <h2 data-i18n="rules_title">Server Rules</h2>
            <div class="rules-grid">
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-handshake"></i> <span data-i18n="rule_1_title">1. Respect is Key</span></div><p data-i18n="rule_1_desc">No insults, belittling...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-regular fa-face-smile-beam"></i> <span data-i18n="rule_2_title">2. Keep Jokes Light</span></div><p data-i18n="rule_2_desc">Joking is fine...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-ban"></i> <span data-i18n="rule_3_title">3. No Spamming</span></div><p data-i18n="rule_3_desc">Do not repeat...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-triangle-exclamation"></i> <span data-i18n="rule_4_title">4. No NSFW Content</span></div><p data-i18n="rule_4_desc">Anything inappropriate...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-mosque"></i> <span data-i18n="rule_5_title">5. No Mocking Religion</span></div><p data-i18n="rule_5_desc">This is a Muslim server...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-link-slash"></i> <span data-i18n="rule_6_title">6. No Unauthorized Links</span></div><p data-i18n="rule_6_desc">Any link must be approved...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-signs-post"></i> <span data-i18n="rule_7_title">7. Use Channels Correctly</span></div><p data-i18n="rule_7_desc">Post in the right place...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-scale-balanced"></i> <span data-i18n="rule_8_title">8. Resolve Issues Calmly</span></div><p data-i18n="rule_8_desc">Do not drag fights...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-user-shield"></i> <span data-i18n="rule_9_title">9. Privacy is a Red Line</span></div><p data-i18n="rule_9_desc">Do not share...</p></div>
                <div class="rule-card"><div class="rule-header"><i class="fa-solid fa-gavel"></i> <span data-i18n="rule_10_title">10. Admin Decisions are Final</span></div><p data-i18n="rule_10_desc">Any violation will result...</p></div>
            </div>
        </div>
    </section>

    <section id="games">
        <div class="card-container downloads-wrapper">
            <h2 data-i18n="games_title">Games Hub</h2>
            <p data-i18n="games_desc" style="margin-top: 10px; color: var(--text-muted);">Take a break and enjoy some games.</p>
            <div class="downloads-grid">
                <div class="download-card">
                    <i class="fa-solid fa-gamepad card-icon"></i>
                    <h3 class="card-title" data-i18n="game1_title">Snake Game ğŸ</h3>
                    <p class="card-desc" data-i18n="game1_desc">Classic snake game...</p>
                    <a href="snake.html" class="download-btn" target="_blank"><i class="fa-solid fa-play"></i> <span data-i18n="btn_play">Play Now</span></a>
                </div>
            </div>
        </div>
    </section>

    <section id="downloads">
        <div class="card-container downloads-wrapper">
            <h2 data-i18n="downloads_title">Software Hub</h2>
            <p data-i18n="downloads_desc" style="margin-top: 10px; color: var(--text-muted);">Download tools for our community.</p>
            <div class="downloads-grid">
                <div class="download-card">
                    <i class="fa-solid fa-book-quran card-icon"></i>
                    <h3 class="card-title" data-i18n="prog1_title">Al Maher</h3>
                    <p class="card-desc" data-i18n="prog1_desc">Al Maher Desktop application...</p>
                    <a href="https://drive.google.com/file/d/1R4fCnyD1n-_pZblCpEW1HiN0cE6ryUOB/view?usp=sharing" class="download-btn" target="_blank"><i class="fa-solid fa-download"></i> <span data-i18n="btn_download">Download</span></a>
                </div>
                <div class="download-card">
                    <i class="fa-solid fa-broom card-icon"></i>
                    <h3 class="card-title" data-i18n="prog2_title">Eto Temp Cleaner</h3>
                    <p class="card-desc" data-i18n="prog2_desc">Cache cleaner and PC speed-up tool.</p>
                    <a href="https://drive.google.com/file/d/1S8Xxj7Ql_FbmbEJ-O2SqIl7swZHI9Jck/view?usp=sharing" class="download-btn" target="_blank"><i class="fa-solid fa-download"></i> <span data-i18n="btn_download">Download</span></a>
                </div>
                <div class="download-card">
                    <i class="fa-solid fa-image card-icon"></i>
                    <h3 class="card-title" data-i18n="prog3_title">Converter Images</h3>
                    <p class="card-desc" data-i18n="prog3_desc">Easy image format converter.</p>
                    <a href="https://drive.google.com/file/d/1U_4wUli7IRLuCAKO4lv1P0HNrk6CSIKP/view?usp=sharing" class="download-btn" target="_blank"><i class="fa-solid fa-download"></i> <span data-i18n="btn_download">Download</span></a>
                </div>
            </div>
        </div>
    </section>

    <footer id="mainFooter">
        <p data-i18n="footer_text">&copy; 2026 Academic Society. All rights reserved</p>
    </footer>

    <script>
        // --- 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ ---
        const SERVER_ID = '1453739248468623457';
        const MANUAL_TOTAL_CHANNELS = 25; 
        async function fetchDiscordStats() {
            try {
                const inviteResponse = await fetch('https://discord.com/api/invites/7eYzD5evsE?with_counts=true');
                const inviteData = await inviteResponse.json();
                if (inviteData && inviteData.approximate_member_count) {
                    document.getElementById('discord-members').textContent = inviteData.approximate_member_count + "+";
                    document.getElementById('discord-online').textContent = inviteData.approximate_presence_count;
                }
                const widgetResponse = await fetch(`https://discord.com/api/guilds/${SERVER_ID}/widget.json`);
                if (widgetResponse.ok) {
                    const widgetData = await widgetResponse.json();
                    const voiceCount = widgetData.members.filter(m => m.channel_id).length;
                    document.getElementById('discord-voice').textContent = voiceCount;
                    document.getElementById('discord-channels').textContent = MANUAL_TOTAL_CHANNELS;
                }
            } catch (error) {
                console.error('Error fetching Discord stats:', error);
                document.getElementById('discord-members').textContent = "1,250+";
                document.getElementById('discord-online').textContent = "340";
                document.getElementById('discord-voice').textContent = "0";
                document.getElementById('discord-channels').textContent = MANUAL_TOTAL_CHANNELS;
            }
        }
        document.addEventListener('DOMContentLoaded', fetchDiscordStats);

        // --- 2. Ø§Ù„ØªØ±Ø¬Ù…Ø© ---
        const translations = {
            en: {
                nav_home: "Home", nav_about: "Who We Are", nav_pomodoro: "Pomodoro", nav_rules: "Rules", nav_games: "Games", nav_downloads: "Apps", nav_quran: "Quran",
                hero_title: "What's up! Welcome to <span>Academic Society</span>",
                hero_desc: "Your chill spot to learn, share cool ideas, and level up together. Hop in and let's build the future, bro.",
                hero_btn: "Join us on Discord",
                stat_members: "Members", stat_online: "Online", stat_voice: "In Voice", stat_channels: "Channels",
                about_title: "Who Are We?",
                about_desc: "This server is just a chill place to hang out, play games, talk, laugh, and meet cool people...<br><br>Simple as that:<br>Join, vibe, and enjoy",
                pomo_title: "Pomodoro Timer", pomo_desc: "Level up your focus. Pick a mode, hit start, and crush your goals.", pomo_work: "Deep Work", pomo_short: "Short Break", pomo_long: "Long Break", pomo_apply: "Apply", pomo_start: "Start", pomo_pause: "Pause", pomo_reset: "Reset", pomo_bg_title: "Change The Vibe",
                quran_title: "Al Maher - Quran", quran_desc: "Listen or download the Quran in high quality.", q_tab_listen: "Listen", q_tab_dl: "Download", q_back: "Back", q_dl_all: "Download Full Quran",
                rules_title: "Server Rules", rule_1_title: "1. Respect is Key", rule_1_desc: "No insults, belittling, bullying...", rule_2_title: "2. Keep Jokes Light", rule_2_desc: "Joking is fine, but if it bothers someone, stop it.", rule_3_title: "3. No Spamming", rule_3_desc: "Do not repeat messages...", rule_4_title: "4. No NSFW Content", rule_4_desc: "Anything inappropriate is strictly forbidden.", rule_5_title: "5. No Mocking Religion", rule_5_desc: "This is a Muslim server...", rule_6_title: "6. No Unauthorized Links", rule_6_desc: "Any link must be approved.", rule_7_title: "7. Use Channels Correctly", rule_7_desc: "Post in the right place.", rule_8_title: "8. Resolve Issues Calmly", rule_8_desc: "Do not drag fights into public.", rule_9_title: "9. Privacy is a Red Line", rule_9_desc: "Do not share personal info.", rule_10_title: "10. Admin Decisions are Final", rule_10_desc: "Violations result in bans.",
                games_title: "Games Hub", games_desc: "Take a break and enjoy some games.", game1_title: "Snake Game ğŸ", game1_desc: "Classic snake game with a twist!", btn_play: "Play Now",
                downloads_title: "Our Apps", downloads_desc: "Download tools for our community.", prog1_title: "Al Maher", prog1_desc: "Desktop application for the Quran.", prog2_title: "Eto Temp Cleaner", prog2_desc: "Cache cleaner and PC speed-up tool.", prog3_title: "Converter Images", prog3_desc: "Easy image format converter.", btn_download: "Download",
                footer_text: "Â© 2026 Academic Society. All rights reserved"
            },
            ar: {
                nav_home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", nav_about: "Ù…ÙŠÙ† Ø¥Ø­Ù†Ø§ØŸ", nav_pomodoro: "Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ", nav_rules: "Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†", nav_games: "Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨", nav_downloads: "Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª", nav_quran: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…",
                hero_title: "ÙŠØ§ Ù‡Ù„Ø§ Ø¨ÙŠÙƒ ÙÙŠ <span>Academic Society</span>",
                hero_desc: "Ù…ÙƒØ§Ù†Ùƒ Ø§Ù„Ø±Ø§ÙŠÙ‚ Ù„Ù„ØªØ¹Ù„ÙŠÙ… ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ø­Ù„ÙˆØ©. Ø¨Ù†ÙƒØ¨Ø± Ù…Ø¹ Ø¨Ø¹Ø¶ ÙˆØ¨Ù†Ø¹Ù„ÙŠ Ø¯Ù…Ø§ØºÙ†Ø§. Ø§Ù†Ø¶Ù… Ù„Ø´Ù„ØªÙ†Ø§ ÙˆØ®Ù„ÙŠÙƒ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„.",
                hero_btn: "Ù†ÙˆØ±Ù†Ø§ Ø¹ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯",
                stat_members: "Ø¹Ø¶Ùˆ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±", stat_online: "Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†", stat_voice: "ÙÙŠ Ø§Ù„Ø±ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©", stat_channels: "Ø±ÙˆÙ… Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±",
                about_title: "Ù…ÙŠÙ† Ø¥Ø­Ù†Ø§ØŸ",
                about_desc: "Ø¨Øµ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¯Ù‡ Ù…Ø¹Ù…ÙˆÙ„ Ø¹Ø´Ø§Ù† Ù†Ù†Ø¨Ø³Ø·ØŒ Ù†ØªÙƒÙ„Ù…ØŒ Ù†Ù„Ø¹Ø¨ØŒ ÙˆÙ†Ù‡Ø²Ø± Ù…Ù† ØºÙŠØ± Ø¬Ùˆ Ø±Ø³Ù…ÙŠ ØªÙ‚ÙŠÙ„...<br><br>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ø³ÙŠØ·:<br>Ø§Ø¯Ø®Ù„ØŒ Ø®Ù„ÙŠÙƒ Ø¹Ù„Ù‰ Ø·Ø¨ÙŠØ¹ØªÙƒØŒ ÙˆØ§Ø³ØªÙ…ØªØ¹",
                pomo_title: "Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ", pomo_desc: "Ø¹Ù„ÙŠ ØªØ±ÙƒÙŠØ²Ùƒ. Ø§Ø®ØªØ§Ø± Ø§Ù„Ù…ÙˆØ¯ØŒ Ø§Ø¨Ø¯Ø£ØŒ ÙˆØ®Ù„Øµ Ø§Ù„Ù„ÙŠ ÙˆØ±Ø§Ùƒ.", pomo_work: "ÙˆÙ‚Øª Ø§Ù„Ø´ØºÙ„", pomo_short: "Ø¨Ø±ÙŠÙƒ Ø®ÙÙŠÙ", pomo_long: "Ø¨Ø±ÙŠÙƒ Ø·ÙˆÙŠÙ„", pomo_apply: "ØªØ·Ø¨ÙŠÙ‚", pomo_start: "Ø§Ø¨Ø¯Ø£", pomo_pause: "ÙˆÙ‚Ù", pomo_reset: "Ø¹ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£ÙˆÙ„", pomo_bg_title: "ØºÙŠØ± Ø§Ù„Ù…ÙˆØ¯ (Ø§Ù„Ø®Ù„ÙÙŠØ©)",
                quran_title: "Ø§Ù„Ù…Ø§Ù‡Ø± - Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…", quran_desc: "Ø§Ø³ØªÙ…Ø¹ Ø£Ùˆ Ø­Ù…Ù„ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ø¨ØµÙˆØª Ù‚Ø§Ø±Ø¦Ùƒ Ø§Ù„Ù…ÙØ¶Ù„.", q_tab_listen: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹", q_tab_dl: "Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„", q_back: "Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡", q_dl_all: "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„",
                rules_title: "Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ±", rule_1_title: "1. Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… Ø£Ø³Ø§Ø³", rule_1_desc: "Ù…ÙÙŠØ´ Ø´ØªÙŠÙ…Ø©ØŒ ØªÙ‚Ù„ÙŠÙ„ØŒ ØªÙ†Ù…Ø±...", rule_2_title: "2. Ø¨Ù„Ø§Ø´ Ù‡Ø²Ø§Ø± ØªÙ‚ÙŠÙ„", rule_2_desc: "Ø§Ù„Ù‡Ø²Ø§Ø± Ø­Ù„Ùˆ Ø¨Ø³ Ø¨Ø­Ø¯ÙˆØ¯.", rule_3_title: "3. Ù…ÙÙŠØ´ Ø³Ø¨Ø§Ù…", rule_3_desc: "Ù…Ù…Ù†ÙˆØ¹ ØªÙƒØ±Ø§Ø± Ø±Ø³Ø§ÙŠÙ„.", rule_4_title: "4. Ù…ÙÙŠØ´ Ù…Ø­ØªÙˆÙ‰ +18", rule_4_desc: "Ù…Ù…Ù†ÙˆØ¹ Ù…Ù†Ø¹Ø§ Ø¨Ø§ØªØ§.", rule_5_title: "5. Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³ØªÙ‡Ø²Ø§Ø¡ Ø¨Ø§Ù„Ø¯ÙŠÙ†", rule_5_desc: "Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø³Ø®Ø±ÙŠØ© Ù…Ù† Ø§Ù„Ø¯ÙŠÙ†.", rule_6_title: "6. Ù…Ù…Ù†ÙˆØ¹ Ù†Ø´Ø± Ø±ÙˆØ§Ø¨Ø·", rule_6_desc: "Ø¥Ù„Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.", rule_7_title: "7. ÙƒÙ„ Ø±ÙˆÙ… Ù„ÙŠÙ‡Ø§ Ø§Ø³ØªØ®Ø¯Ø§Ù…", rule_7_desc: "Ø§ÙƒØªØ¨ ÙÙŠ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ØµØ­.", rule_8_title: "8. Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„Ùƒ Ø¨Ù‡Ø¯ÙˆØ¡", rule_8_desc: "Ù…ÙÙŠØ´ Ø®Ù†Ø§Ù‚Ø§Øª ÙÙŠ Ø§Ù„Ø¹Ø§Ù….", rule_9_title: "9. Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø®Ø· Ø£Ø­Ù…Ø±", rule_9_desc: "Ù…Ù…Ù†ÙˆØ¹ Ù†Ø´Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø¯.", rule_10_title: "10. Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø±Ø§Ø±Ù‡Ø§ Ù†Ù‡Ø§Ø¦ÙŠ", rule_10_desc: "Ø§Ù„Ù…Ø®Ø§Ù„ÙØ© ØªØ¤Ø¯ÙŠ Ù„Ù„Ø·Ø±Ø¯.",
                games_title: "Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨", games_desc: "Ø®Ø¯ Ø¨Ø±ÙŠÙƒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø´ÙˆÙŠØ© Ø£Ù„Ø¹Ø§Ø¨.", game1_title: "Ù„Ø¹Ø¨Ø© Ø§Ù„Ø«Ø¹Ø¨Ø§Ù† ğŸ", game1_desc: "Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ¹Ø¨Ø§Ù† Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©!", btn_play: "Ø§Ù„Ø¹Ø¨ Ø¯Ù„ÙˆÙ‚ØªÙŠ",
                downloads_title: "Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª", downloads_desc: "Ø­Ù…Ù„ ÙƒÙ„ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„Ù†Ø§Ù‡Ø§.", prog1_title: "Ø§Ù„Ù…Ø§Ù‡Ø±", prog1_desc: "Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„Ù…Ø§Ù‡Ø±.", prog2_title: "Eto Temp Cleaner", prog2_desc: "Ø£Ø¯Ø§Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙƒØ§Ø´ ÙˆØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø².", prog3_title: "Converter Images", prog3_desc: "Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØ­ÙˆÙŠÙ„ ØµÙŠØº Ø§Ù„ØµÙˆØ±.", btn_download: "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬",
                footer_text: "Â© 2026 Academic Society. ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© ."
            }
        };

        const placeholders = {
            en: { q_search_reciter: "Search for a reciter...", q_search_surah: "Search for a surah..." },
            ar: { q_search_reciter: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø§Ø±Ø¦...", q_search_surah: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..." }
        };

        let currentLang = 'en';

        function toggleLanguage() {
            document.body.style.opacity = '0';
            setTimeout(() => {
                currentLang = currentLang === 'en' ? 'ar' : 'en';
                document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
                document.documentElement.lang = currentLang;

                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(translations[currentLang][key]) el.innerHTML = translations[currentLang][key];
                });
                
                document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-i18n-placeholder');
                    if(placeholders[currentLang][key]) el.placeholder = placeholders[currentLang][key];
                });

                document.getElementById('langText').textContent = currentLang === 'en' ? 'Ø¹Ø±Ø¨ÙŠ' : 'English';
                updateTimerText(); 
                document.body.style.opacity = '1';
            }, 300);
        }

        // --- 3. Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ ---
        let timerInterval, timeLeft = 25 * 60, isRunning = false;
        const modes = { work: 25 * 60, shortBreak: 5 * 60, longBreak: 15 * 60 };

        function updateDisplay() {
            const m = Math.floor(timeLeft / 60), s = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }
        function setMode(mode) {
            clearInterval(timerInterval); isRunning = false; timeLeft = modes[mode]; updateDisplay();
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            if(mode === 'work') document.getElementById('mode-work').classList.add('active');
            if(mode === 'shortBreak') document.getElementById('mode-short').classList.add('active');
            if(mode === 'longBreak') document.getElementById('mode-long').classList.add('active');
            document.getElementById('customMinutes').value = ''; updateTimerText();
        }
        function setCustomMode() {
            const val = document.getElementById('customMinutes').value;
            if (val && val > 0) {
                clearInterval(timerInterval); isRunning = false; timeLeft = parseInt(val) * 60; updateDisplay();
                document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active')); updateTimerText();
            } else alert(currentLang === 'ar' ? "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­!" : "Please enter valid minutes!");
        }
        function toggleTimer() {
            if (isRunning) { clearInterval(timerInterval); isRunning = false; } 
            else {
                if(timeLeft <= 0) return;
                isRunning = true;
                timerInterval = setInterval(() => {
                    timeLeft--; updateDisplay();
                    if (timeLeft <= 0) { clearInterval(timerInterval); isRunning = false; alert(currentLang === 'ar' ? "Ø§Ù„ÙˆÙ‚Øª Ø®Ù„Øµ!" : "Time's up!"); updateTimerText(); }
                }, 1000);
            }
            updateTimerText();
        }
        function resetTimer() {
            clearInterval(timerInterval); isRunning = false;
            const customMins = document.getElementById('customMinutes').value;
            if (document.getElementById('mode-work').classList.contains('active')) timeLeft = modes.work;
            else if (document.getElementById('mode-short').classList.contains('active')) timeLeft = modes.shortBreak;
            else if (document.getElementById('mode-long').classList.contains('active')) timeLeft = modes.longBreak;
            else if (customMins && customMins > 0) timeLeft = parseInt(customMins) * 60;
            else timeLeft = modes.work;
            updateDisplay(); updateTimerText();
        }
        function updateTimerText() {
            const icon = document.getElementById('startIcon'), text = document.getElementById('startText');
            if (isRunning) { icon.className = 'fa-solid fa-pause'; text.textContent = translations[currentLang].pomo_pause; } 
            else { icon.className = 'fa-solid fa-play'; text.textContent = translations[currentLang].pomo_start; }
        }
        function changeBg(color) { document.getElementById('pomoCard').style.background = color; }
        updateDisplay();


        // ================= 4. Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… (QURAN APP) =================
        const surahNames = [
            "Ø§Ù„ÙØ§ØªØ­Ø©", "Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", "Ø§Ù„Ù†Ø³Ø§Ø¡", "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", "Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", "Ø§Ù„Ø£Ø¹Ø±Ø§Ù", "Ø§Ù„Ø£Ù†ÙØ§Ù„", "Ø§Ù„ØªÙˆØ¨Ø©", "ÙŠÙˆÙ†Ø³",
            "Ù‡ÙˆØ¯", "ÙŠÙˆØ³Ù", "Ø§Ù„Ø±Ø¹Ø¯", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ø§Ù„Ø­Ø¬Ø±", "Ø§Ù„Ù†Ø­Ù„", "Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", "Ø§Ù„ÙƒÙ‡Ù", "Ù…Ø±ÙŠÙ…", "Ø·Ù‡",
            "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", "Ø§Ù„Ø­Ø¬", "Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", "Ø§Ù„Ù†ÙˆØ±", "Ø§Ù„ÙØ±Ù‚Ø§Ù†", "Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", "Ø§Ù„Ù†Ù…Ù„", "Ø§Ù„Ù‚ØµØµ", "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", "Ø§Ù„Ø±ÙˆÙ…",
            "Ù„Ù‚Ù…Ø§Ù†", "Ø§Ù„Ø³Ø¬Ø¯Ø©", "Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", "Ø³Ø¨Ø£", "ÙØ§Ø·Ø±", "ÙŠØ³", "Ø§Ù„ØµØ§ÙØ§Øª", "Øµ", "Ø§Ù„Ø²Ù…Ø±", "ØºØ§ÙØ±",
            "ÙØµÙ„Øª", "Ø§Ù„Ø´ÙˆØ±Ù‰", "Ø§Ù„Ø²Ø®Ø±Ù", "Ø§Ù„Ø¯Ø®Ø§Ù†", "Ø§Ù„Ø¬Ø§Ø«ÙŠØ©", "Ø§Ù„Ø£Ø­Ù‚Ø§Ù", "Ù…Ø­Ù…Ø¯", "Ø§Ù„ÙØªØ­", "Ø§Ù„Ø­Ø¬Ø±Ø§Øª", "Ù‚",
            "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", "Ø§Ù„Ø·ÙˆØ±", "Ø§Ù„Ù†Ø¬Ù…", "Ø§Ù„Ù‚Ù…Ø±", "Ø§Ù„Ø±Ø­Ù…Ù†", "Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", "Ø§Ù„Ø­Ø¯ÙŠØ¯", "Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", "Ø§Ù„Ø­Ø´Ø±", "Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",
            "Ø§Ù„ØµÙ", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", "Ø§Ù„ØªØºØ§Ø¨Ù†", "Ø§Ù„Ø·Ù„Ø§Ù‚", "Ø§Ù„ØªØ­Ø±ÙŠÙ…", "Ø§Ù„Ù…Ù„Ùƒ", "Ø§Ù„Ù‚Ù„Ù…", "Ø§Ù„Ø­Ø§Ù‚Ø©", "Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",
            "Ù†ÙˆØ­", "Ø§Ù„Ø¬Ù†", "Ø§Ù„Ù…Ø²Ù…Ù„", "Ø§Ù„Ù…Ø¯Ø«Ø±", "Ø§Ù„Ù‚ÙŠØ§Ù…Ø©", "Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", "Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", "Ø§Ù„Ù†Ø¨Ø£", "Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", "Ø¹Ø¨Ø³",
            "Ø§Ù„ØªÙƒÙˆÙŠØ±", "Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±", "Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", "Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚", "Ø§Ù„Ø¨Ø±ÙˆØ¬", "Ø§Ù„Ø·Ø§Ø±Ù‚", "Ø§Ù„Ø£Ø¹Ù„Ù‰", "Ø§Ù„ØºØ§Ø´ÙŠØ©", "Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø¨Ù„Ø¯",
            "Ø§Ù„Ø´Ù…Ø³", "Ø§Ù„Ù„ÙŠÙ„", "Ø§Ù„Ø¶Ø­Ù‰", "Ø§Ù„Ø´Ø±Ø­", "Ø§Ù„ØªÙŠÙ†", "Ø§Ù„Ø¹Ù„Ù‚", "Ø§Ù„Ù‚Ø¯Ø±", "Ø§Ù„Ø¨ÙŠÙ†Ø©", "Ø§Ù„Ø²Ù„Ø²Ù„Ø©", "Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",
            "Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", "Ø§Ù„ØªÙƒØ§Ø«Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù‡Ù…Ø²Ø©", "Ø§Ù„ÙÙŠÙ„", "Ù‚Ø±ÙŠØ´", "Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", "Ø§Ù„ÙƒÙˆØ«Ø±", "Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", "Ø§Ù„Ù†ØµØ±",
            "Ø§Ù„Ù…Ø³Ø¯", "Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", "Ø§Ù„ÙÙ„Ù‚", "Ø§Ù„Ù†Ø§Ø³"
        ];

        let qRecitersData = [];
        let qCurrentSurahs = [];
        let qCurrentServer = "";
        let qCurrentReciterName = "";
        let qPlayingIndex = -1;
        let qMode = "listen"; // listen or download

        const qAudio = document.getElementById('qAudio');
        const qPlayBtn = document.getElementById('qp-playBtn');
        const qProgressBar = document.getElementById('qp-progress-bar');
        const qCurrentTimeEl = document.getElementById('qp-current-time');
        const qDurationEl = document.getElementById('qp-duration');
        const qPlayerBar = document.getElementById('qPlayerBar');
        const mainFooter = document.getElementById('mainFooter');

        // ØªØ¨Ø¯ÙŠÙ„ Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù‚Ø±Ø¢Ù†
        function switchQTab(mode) {
            qMode = mode;
            document.getElementById('tab-listen').classList.remove('active');
            document.getElementById('tab-download').classList.remove('active');
            document.getElementById(`tab-${mode}`).classList.add('active');

            if(mode === 'listen') {
                document.getElementById('q-download-container').classList.add('hidden');
                document.getElementById('q-listen-container').classList.remove('hidden');
                goBack('listen');
            } else {
                document.getElementById('q-listen-container').classList.add('hidden');
                document.getElementById('q-download-container').classList.remove('hidden');
                goBack('download');
            }
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¬Ø§ÙˆØ±
        async function fetchQuranData() {
            try {
                // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ù„Ù reciters.json ÙÙŠ Ù†ÙØ³ Ù…Ø³Ø§Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù
                const response = await fetch('./reciters.json'); 
                const data = await response.json();
                qRecitersData = data.reciters;
                document.getElementById('q-loading').classList.add('hidden');
                renderQReciters(qRecitersData);
            } catch (error) {
                console.error("Error fetching reciters:", error);
                document.getElementById('q-loading').innerHTML = "Failed to load data. Make sure reciters.json exists.";
                document.getElementById('q-loading').style.width = "auto";
                document.getElementById('q-loading').style.border = "none";
                document.getElementById('q-loading').style.animation = "none";
            }
        }

        function renderQReciters(reciters) {
            const listenGrid = document.getElementById('q-reciters-grid');
            const dlGrid = document.getElementById('q-dl-reciters-grid');
            listenGrid.innerHTML = ''; dlGrid.innerHTML = '';

            reciters.forEach(r => {
                if(r.moshaf && r.moshaf.length > 0) {
                    const moshaf = r.moshaf[0];
                    
                    // ÙƒØ§Ø±Øª Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹
                    const lCard = document.createElement('div');
                    lCard.className = 'q-card';
                    lCard.innerHTML = `<div class="icon-wrapper"><i class="fas fa-microphone-alt"></i></div><h3>${r.name}</h3><p>${moshaf.name}</p>`;
                    lCard.onclick = () => openQReciter(r.name, moshaf, 'listen');
                    listenGrid.appendChild(lCard);

                    // ÙƒØ§Ø±Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    const dCard = document.createElement('div');
                    dCard.className = 'q-card';
                    dCard.innerHTML = `<div class="icon-wrapper" style="background-color: rgba(59, 130, 246, 0.1); color: #3b82f6;"><i class="fas fa-file-download"></i></div><h3>${r.name}</h3><p>${moshaf.name}</p>`;
                    dCard.onclick = () => openQReciter(r.name, moshaf, 'download');
                    dlGrid.appendChild(dCard);
                }
            });
        }

        function openQReciter(name, moshaf, mode) {
            qCurrentReciterName = name;
            qCurrentServer = moshaf.server;
            const surahsNums = moshaf.surah_list.split(',').map(n => parseInt(n));
            qCurrentSurahs = surahsNums.map(n => ({ id: n, name: surahNames[n - 1] }));

            document.getElementById('qReciterSearchBox').classList.add('hidden');
            document.getElementById('qSurahSearchBox').classList.remove('hidden');
            document.getElementById('qSurahSearch').value = '';

            if (mode === 'listen') {
                document.getElementById('q-reciters-view').classList.add('hidden');
                document.getElementById('q-surahs-view').classList.remove('hidden');
                document.getElementById('q-current-reciter').innerText = name;
                renderQSurahs(qCurrentSurahs, 'listen');
            } else {
                document.getElementById('q-dl-reciters-view').classList.add('hidden');
                document.getElementById('q-dl-surahs-view').classList.remove('hidden');
                document.getElementById('q-dl-current-reciter').innerText = name;
                renderQSurahs(qCurrentSurahs, 'download');
            }
        }

        function renderQSurahs(surahs, mode) {
            const gridId = mode === 'listen' ? 'q-surahs-grid' : 'q-dl-surahs-grid';
            const grid = document.getElementById(gridId);
            grid.innerHTML = '';

            surahs.forEach((s, idx) => {
                const num = String(s.id).padStart(3, '0');
                const url = `${qCurrentServer}${num}.mp3`;
                const card = document.createElement('div');
                card.className = 'q-card q-surah-card';
                
                if (mode === 'listen') {
                    if(qPlayingIndex === idx && document.getElementById('qp-reciter').innerText === qCurrentReciterName) {
                        card.classList.add('playing');
                    }
                    card.innerHTML = `<div class="q-surah-info"><div class="q-surah-num">${s.id}</div><h3>Ø³ÙˆØ±Ø© ${s.name}</h3></div><i class="fas fa-play q-action-icon"></i>`;
                    card.onclick = () => playQuranSurah(idx);
                } else {
                    card.innerHTML = `<a href="${url}" target="_blank" download="Surah_${s.name}.mp3" style="text-decoration:none; color:inherit; display:flex; align-items:center; width:100%; justify-content:space-between;">
                        <div class="q-surah-info"><div class="q-surah-num" style="color:#3b82f6;">${s.id}</div><h3>Ø³ÙˆØ±Ø© ${s.name}</h3></div>
                        <i class="fas fa-download q-action-icon" style="color:#3b82f6;"></i>
                    </a>`;
                }
                grid.appendChild(card);
            });
        }

        function goBack(mode) {
            document.getElementById('qSurahSearchBox').classList.add('hidden');
            document.getElementById('qReciterSearchBox').classList.remove('hidden');
            document.getElementById('qReciterSearch').value = '';
            renderQReciters(qRecitersData); // reset filter

            if(mode === 'listen') {
                document.getElementById('q-surahs-view').classList.add('hidden');
                document.getElementById('q-reciters-view').classList.remove('hidden');
            } else {
                document.getElementById('q-dl-surahs-view').classList.add('hidden');
                document.getElementById('q-dl-reciters-view').classList.remove('hidden');
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        function playQuranSurah(idx) {
            if (idx < 0 || idx >= qCurrentSurahs.length) return;
            qPlayingIndex = idx;
            const s = qCurrentSurahs[idx];
            const url = `${qCurrentServer}${String(s.id).padStart(3, '0')}.mp3`;
            
            qAudio.src = url;
            qAudio.play();

            document.getElementById('qp-surah').innerText = `Ø³ÙˆØ±Ø© ${s.name}`;
            document.getElementById('qp-reciter').innerText = qCurrentReciterName;
            qPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ø³ÙÙ„ÙŠ
            qPlayerBar.classList.add('active');
            mainFooter.style.marginBottom = "100px";

            if(qMode === 'listen') renderQSurahs(qCurrentSurahs, 'listen');
        }

        function qTogglePlay() {
            if (!qAudio.src) return;
            if (qAudio.paused) { qAudio.play(); qPlayBtn.innerHTML = '<i class="fas fa-pause"></i>'; } 
            else { qAudio.pause(); qPlayBtn.innerHTML = '<i class="fas fa-play"></i>'; }
        }

        function qPlayNext() { playQuranSurah(qPlayingIndex + 1); }
        function qPlayPrev() { playQuranSurah(qPlayingIndex - 1); }
        function closeQuranPlayer() {
            qAudio.pause();
            qPlayerBar.classList.remove('active');
            mainFooter.style.marginBottom = "0";
            qPlayingIndex = -1;
            if(qMode === 'listen') renderQSurahs(qCurrentSurahs, 'listen'); // Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        qAudio.addEventListener('timeupdate', () => {
            if (!isNaN(qAudio.duration)) {
                qProgressBar.max = qAudio.duration;
                qProgressBar.value = qAudio.currentTime;
                qCurrentTimeEl.innerText = formatQTime(qAudio.currentTime);
                qDurationEl.innerText = formatQTime(qAudio.duration);
            }
        });
        qProgressBar.addEventListener('input', () => { qAudio.currentTime = qProgressBar.value; });
        qAudio.addEventListener('ended', qPlayNext);
        document.getElementById('qp-volume-slider').addEventListener('input', (e) => { qAudio.volume = e.target.value; });

        function formatQTime(secs) {
            const m = Math.floor(secs / 60), s = Math.floor(secs % 60);
            return `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        // Ø¨Ø­Ø« Ø§Ù„Ù‚Ø±Ø§Ø¡ ÙˆØ§Ù„Ø³ÙˆØ±
        document.getElementById('qReciterSearch').addEventListener('input', (e) => {
            const v = e.target.value.trim();
            renderQReciters(qRecitersData.filter(r => r.name.includes(v)));
        });
        document.getElementById('qSurahSearch').addEventListener('input', (e) => {
            const v = e.target.value.trim();
            renderQSurahs(qCurrentSurahs.filter(s => s.name.includes(v)), qMode);
        });

        // ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù ZIP (ÙŠØ³ØªÙ„Ø²Ù… Ù…ÙƒØªØ¨Ø© JSZip Ùˆ FileSaver Ø§Ù„ØªÙŠ Ø£Ø¶ÙÙ†Ø§Ù‡Ø§ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰)
        async function downloadFullQuran() {
            const msg = currentLang === 'ar' ? 
                `Ù‡ÙŠØªÙ… ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„ Ø¨ØµÙˆØª ${qCurrentReciterName} ÙÙŠ Ù…Ù„Ù ZIP.\nØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¯ÙŠ Ù‡ØªØ§Ø®Ø¯ ÙˆÙ‚Øª ÙˆÙ…Ù…ÙƒÙ† ØªÙƒÙˆÙ† ØªÙ‚ÙŠÙ„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø².. Ù…ÙˆØ§ÙÙ‚ØŸ` :
                `Full Quran by ${qCurrentReciterName} will be zipped.\nWarning: This takes time and memory. Proceed?`;
                
            if (!confirm(msg)) return;

            const btnText = document.getElementById('dl-btn-text');
            const originalHTML = btnText.innerHTML;
            const btn = document.querySelector('.btn-dl-all');
            
            btn.disabled = true; btn.style.opacity = '0.6'; btn.style.cursor = 'wait';
            
            try {
                const zip = new JSZip();
                const folderName = `Quran_${qCurrentReciterName}`;
                const folder = zip.folder(folderName);

                for (let i = 0; i < qCurrentSurahs.length; i++) {
                    const s = qCurrentSurahs[i];
                    const num = String(s.id).padStart(3, '0');
                    btnText.innerHTML = currentLang === 'ar' ? `Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© ${s.name} (${i+1}/${qCurrentSurahs.length})..` : `Downloading Surah ${s.name} (${i+1}/${qCurrentSurahs.length})..`;
                    
                    const res = await fetch(`${qCurrentServer}${num}.mp3`);
                    if (!res.ok) throw new Error("Network error");
                    folder.file(`${num}_${s.name}.mp3`, await res.blob());
                }

                btnText.innerHTML = currentLang === 'ar' ? `Ø¬Ø§Ø±ÙŠ Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª.. Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±` : `Zipping files.. Please wait`;
                
                const content = await zip.generateAsync({ type: "blob", compression: "STORE" }, (meta) => {
                    if(meta.percent) btnText.innerHTML = (currentLang === 'ar' ? `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¶ØºØ·: ` : `Zipping: `) + meta.percent.toFixed(0) + '%';
                });

                saveAs(content, `${folderName}.zip`);
                btnText.innerHTML = currentLang === 'ar' ? "ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!" : "Downloaded Successfully!";
            } catch (error) {
                console.error(error);
                alert(currentLang === 'ar' ? "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„." : "Error downloading files.");
                btnText.innerHTML = originalHTML;
            } finally {
                setTimeout(() => {
                    btnText.innerHTML = originalHTML;
                    btn.disabled = false; btn.style.opacity = '1'; btn.style.cursor = 'pointer';
                }, 4000);
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        fetchQuranData();

    </script>
</body>
</html>
